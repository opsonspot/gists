# /etc/config/mwan3

config policy 'default_poli_p'
	option last_resort 'default'
	list use_member 'wan_balance'
	list use_member 'wan2_only'

config policy 'ovpnc_only_p'
	list use_member 'ovpnc_only'
	option last_resort 'unreachable'

config policy 'wan_only_p'
	list use_member 'wan_only'
	option last_resort 'unreachable'

config policy 'wan2_only_p'
	list use_member 'wan2_only'
	option last_resort 'unreachable'

config policy 'wwan_only_p'
	list use_member 'wwan_only'
	option last_resort 'unreachable'

config policy 'wan_wan2_only_p'
	option last_resort 'unreachable'
	list use_member 'wan_balance'
	list use_member 'wan2_balance'

config rule 'outb_ikigai'
	option family 'ipv4'
	option src_ip '10.16.90.0/24'
	option proto 'all'
	option use_policy 'wan_wan2_only_p'
	option dest_ip '0.0.0.0/0'
	option sticky '1'

config rule 'outb_usa'
	option proto 'all'
	option sticky '0'
	option ipset 'outb_usa'
	option use_policy 'ovpnc_only_p'
	option logging '1'
	option family 'ipv4'

config rule 'default_rule'
	option dest_ip '0.0.0.0/0'
	option family 'ipv4'
	option proto 'all'
	option sticky '1'
	option use_policy 'default_poli_p'
	option timeout '300'

config rule 'inb_wan'
	option proto 'all'
	option sticky '1'
	option inbound '1'
	option family 'ipv4'
	option use_policy 'wan_only_p'
	option dest_ip '10.16.10.1'

config rule 'inb_wan2'
	option proto 'all'
	option sticky '1'
	option inbound '1'
	option family 'ipv4'
	option use_policy 'wan2_only_p'
	option dest_ip '10.16.10.1'

config member 'wan_only'
	option interface 'wan'
	option metric '1'
	option weight '3'

config member 'wan2_only'
	option metric '2'
	option weight '3'
	option interface 'secondwan'

config member 'wwan_only'
	option interface 'wwan'
	option weight '3'
	option metric '3'

config member 'wan_balance'
	option interface 'wan'
	option metric '1'
	option weight '3'

config member 'wan2_balance'
	option metric '1'
	option weight '3'
	option interface 'secondwan'

config member 'wwan_balance'
	option interface 'wwan'
	option metric '1'
	option weight '3'

config globals 'globals'
	option enabled '1'
	option mmx_mask '0x3F00'
	option logging '1'
	option loglevel 'info'

config interface 'wan'
	option enabled '1'
	option family 'ipv4'
	option reliability '1'
	option bind_interface 'false'
	option count '1'
	option timeout '2'
	option interval '5'
	option down '3'
	option up '8'
	option track_method 'ping'
	option size '56'
	option max_ttl '60'
	option check_quality '0'
	option failure_interval '5'
	option recovery_interval '5'
	option track_ip_src '103.250.189.183'
	option initial_state 'online'
	list track_ip '1.1.1.1'
	list track_ip '8.8.8.8'
	list track_ip '208.67.222.222'

config interface 'wwan'
	list track_ip '1.1.1.1'
	list track_ip '8.8.8.8'
	list track_ip '208.67.222.222'
	list track_ip '208.67.220.220'
	option family 'ipv4'
	option reliability '1'
	option count '1'
	option timeout '2'
	option interval '5'
	option down '3'
	option up '8'
	option track_method 'ping'
	option size '56'
	option max_ttl '60'
	option check_quality '0'
	option failure_interval '5'
	option recovery_interval '5'
	option initial_state 'online'
	option enabled '0'

config interface 'secondwan'
	option enabled '1'
	option family 'ipv4'
	list track_ip '1.1.1.1'
	list track_ip '8.8.8.8'
	list track_ip '208.67.222.222'
	option track_method 'ping'
	option reliability '1'
	option count '1'
	option size '56'
	option max_ttl '60'
	option check_quality '0'
	option timeout '2'
	option interval '5'
	option failure_interval '5'
	option recovery_interval '5'
	option down '3'
	option up '8'
	option initial_state 'online'

config interface 'ovpnclient'
	option enabled '1'
	option family 'ipv4'
	option track_method 'ping'
	option reliability '1'
	option count '1'
	option size '56'
	option max_ttl '60'
	option check_quality '0'
	option timeout '2'
	option interval '5'
	option failure_interval '5'
	option recovery_interval '5'
	option down '3'
	option up '8'
	list track_ip '10.100.255.186'
	list track_ip '10.2.255.32'
	option initial_state 'online'
	list flush_conntrack 'connected'
	list flush_conntrack 'disconnected'

config member 'ovpnc_only'
	option interface 'ovpnclient'
	option metric '1'
	option weight '3'

root@GL-MT6000:~# 

